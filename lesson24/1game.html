<div>
    <div id="batman_div" class="batman"><img id="batman" src="batman.png" alt="batman"></div>
    <div id="danger2div" class="danger2"><img id="pillar2" class="pillar2" src="inverted_flappy_pillar.jpeg"
            alt="danger2">
    </div>
    <div id="dangerdiv" class="danger"><img id="pillar" class="pillar" src="pillar.png" alt="danger"></div>
</div>
<script>
    document.addEventListener('keydown', function (event) {
        console.log(event.key)
        if (event.key === 'ArrowRight') {
            right();
        }
        if (event.key === 'ArrowLeft') {
            left();
        }
    })

    function left() {
        const div = document.getElementById("batman_div")
        const style = getComputedStyle(div)
        const leftStr = style.getPropertyValue('left')
        const left = parseInt(leftStr, 10)
        console.log(left)
        document.getElementById("batman_div").style.left = (left - 10) + "px"
        sprite_crashed()
    }

    function right() {
        const div = document.getElementById("batman_div")
        const style = getComputedStyle(div)
        const leftStr = style.getPropertyValue('left')
        const left = parseInt(leftStr, 10)
        console.log(left)
        document.getElementById("batman_div").style.left = (left + 10) + "px"
        sprite_crashed()
    }

    function hasCrashed(r1, r2, r3) {
        console.log('r1=', r1, 'r2=', r2, 'r3=', r3)

        console.log('r1.x', r1.x)
        let r1xw = r1.x + r1.width
        console.log('r1xw', r1xw)
        console.log(r1.width)

        let top_coll1 = r1.x + r1.width >= r2.x
        let top_coll2 = r1.y <= r2.y + r2.height
        let bott_col1 = r1.x + r1.width >= r3.x
        let bott_coll2 = r1.y + r1.height <= r3.y

        console.log(top_coll1, top_coll2, bott_col1, bott_coll2)

        if (r1.x + r1.width >= r2.x && r1.y <= r2.y + r2.height ||
            r1.x + r1.width >= r3.x && r1.y + r1.height <= r3.y) {
            return true
        }
        else {
            return false
        }
    }

    function sprite_crashed() {
        const sprite = document.getElementById('batman_div')
        const pillar = document.getElementById('dangerdiv')
        const pillar2 = document.getElementById('danger2div')

        const batRect = {
            x: parseInt(getComputedStyle(sprite).getPropertyValue('left')),
            y: parseInt(getComputedStyle(sprite).getPropertyValue('top')),
            height: parseInt(getComputedStyle(sprite).getPropertyValue('height')),
            width: parseInt(getComputedStyle(sprite).getPropertyValue('width'))
        }
        const pRect = {
            x: parseInt(getComputedStyle(pillar).getPropertyValue('left')),
            y: parseInt(getComputedStyle(pillar).getPropertyValue('top')),
            height: parseInt(getComputedStyle(pillar).getPropertyValue('height')),
            width: parseInt(getComputedStyle(pillar).getPropertyValue('width'))
        };
        const p2Rect = {
            x: parseInt(getComputedStyle(pillar2).getPropertyValue('left')),
            y: parseInt(getComputedStyle(pillar2).getPropertyValue('top')),
            height: parseInt(getComputedStyle(pillar2).getPropertyValue('height')),
            width: parseInt(getComputedStyle(pillar2).getPropertyValue('width'))
        };

        const h1 = hasCrashed(batRect, pRect, p2Rect)

        console.log('batRect = ', batRect)
        console.log('pRect = ', pRect)
        console.log('p2Rect = ', p2Rect)
        console.log(h1)
    }
    sprite_crashed()

    function game_over(){
        
    }
</script>
<style>
    .batman {
        position: relative;
        left: 0px;
        width: 200px;
        top: 100px;
        ;
        border: 3px solid green;
    }


    .danger {
        position: absolute;
        top: 400px;
        left: 300px;
        width: 200px;
        height: 100%;

        max-width: 100%;
        max-height: 100%;

        border: 3px solid green;

    }

    .danger2 {
        position: absolute;
        top: 0px;
        left: 300px;
        width: 200px;
        height: 100%;

        max-width: 100%;
        max-height: 100%;

        border: 3px solid green;

    }
</style>